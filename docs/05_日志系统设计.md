# 日志系统设计

## 概述
分层日志系统，为各组件提供统一日志记录功能。支持多级别、多输出方式。

## 架构
```
Logger (基础日志器)
├── LogManager (日志管理器)
├── LogConfig (日志配置)
└── ComponentLoggers (组件日志器)
    ├── BPlusTreeLogger
    ├── StorageLogger
    ├── ExecutionLogger
    ├── SQLLogger
    └── TableLogger
```

## 核心特性
- **日志级别**: DEBUG, INFO, WARN, ERROR, FATAL
- **输出方式**: 控制台、文件、组合输出
- **线程安全**: 使用`std::mutex`保护，支持多线程并发

## 使用方式
```cpp
// 获取日志器
auto logger = DatabaseSystem::Log::LogConfig::GetSQLLogger();

// 记录日志
logger->Debug("调试信息: {}", debug_data);
logger->Info("操作完成: {}", result);
logger->Error("错误: {}", error_msg);

// 初始化配置
DatabaseSystem::Log::LogConfig::Initialize();
LogConfig::SetLogLevel(LogLevel::DEBUG);
LogConfig::SetLogDirectory("logs/");
```

## 组件日志器
- **BPlusTreeLogger**: B+树操作，文件`logs/bplus_tree.log`
- **StorageLogger**: 存储引擎操作，文件`logs/storage.log`
- **ExecutionLogger**: 执行引擎操作，文件`logs/execution.log`
- **SQLLogger**: SQL解析执行，文件`logs/sql.log`
- **TableLogger**: 表管理操作，文件`logs/table.log`

## 配置选项
```cpp
// 日志级别
LogConfig::SetLogLevel(LogLevel::INFO);
LogConfig::SetComponentLogLevel("SQL", LogLevel::DEBUG);

// 输出控制
LogConfig::SetConsoleOutput(true);
LogConfig::SetFileOutput(true);
LogConfig::SetLogDirectory("custom_logs/");
```

## 性能优化
- 异步日志写入（可扩展）
- 日志文件轮转和压缩
- 字符串格式化优化
- 智能缓冲区管理
